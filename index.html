<html>

<head>

<link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@200&display=swap" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@300;400&display=swap" rel="stylesheet">

<style>

#title
{
  text-align: center;
}

#game
{
  margin: auto;
  background: lightblue;
  width: 600px;
  height: 250px;
}

#stage
{
  width: 500px;
  height: 100px;
  background-color: purple;
  margin-left:8%;
}

#menuScreen
{
  margin-left:23%;
  margin-bottom:5%;
}

button
{
  font-size: 24px;
  font-weight:7900;
}

h2
{
  margin:auto;
  width:195px;
  margin-bottom:13px;
}

textarea
{
  margin-bottom:15px;
}

#app
{
  margin:auto;
  width:56%;
  background: lightblue;
}

.countContainer
{
  display:flex;
  margin-left: auto;
  width: 100%;
}

.countContainer span
{
  
}

p.letters,#letterCount,#wordCount
{
  margin-top:10px;
  font-weight:700;
  font-family: 'Source Sans Pro', sans-serif;
  font-size: 22px;
}

#letterCount
{
  
}

.counts
{
  background:pink;
  width:400px;
}

.radioContainer
{
  display:flex;
  flex-direction:row;
}

#sort div
{
  margin-left:3%;
}

</style>

<body>

<title> Letter Finder </title>

<div ng-app = "words" id = "app">

  <div class = "container">

    <h2> Text Counter </h2>
      <div ng-controller = "textCount">
        <textarea id = "textField" ng-model = "texts" ng-change = "recount()" class = "form-control" rows="5">
        </textarea>


<form>
      <div id = "sort">
         

        <div class = "radioContainer">
          <span> Sort by: </span>
          <div class="form-check" ng-repeat = "i in sortType">
            <input ng-model = "sorting" class="sortRadio form-check-input" value = {{i.sort}}  ng-click= "sortBy(i.sort)" type="radio" name="flexRadioDefault" id="flexRadioDefault1">
            <label class="form-check-label" for="flexRadioDefault1">
              {{i.name}}  
            </label>
              </div>
            </div>     
        </div>

        <div class = "countContainer">
          <span id = "letterCount" class = "counts"> Letter Count: {{letterCount}}
          <p class = "letters" ng-repeat = "i in letters | orderBy:sorting"> {{i.name|uppercase}} - {{i.count}} ({{(i.count/altLetterCount*100).toFixed(2)}}%)</p></span>
          <span id = "wordCount" class = "counts"> Word Count: {{wordCount}} 
          <p class = "words" ng-repeat = "i in words"> {{i}}:{{i.count}} </p>
          </span> 
          <!-- <span id = "sentenceCount" class = "counts"> Sentence Count: {{sentenceCount}} </span> -->
        </div>
      </div>
  </div>
</div>

</form>

</body>

<script>

var app = angular.module("words",[]);

app.controller("textCount",
function($scope)
{
  $scope.sorting = "name";
  $scope.altLetterCount = 1;
  $scope.letterCount = 0;
  $scope.wordCount = 0;
 
  $scope.sortBy = function(category)
  {
    // alert($scope.category)
    $scope.sorting = category;
  }

  /*$scope.eachWordCount = function(text)
  {
    $scope.arr = [];
    $scope.fullArr = [];
    $scope.text;
    $scope.index;

    for (var i = 0; i < text.length; i++)
    {
      if (text[i] != " ")
      {
        $scope.arr.push(text[i]);
      }

      else if (text[i] == " ")
      {
        $scope.text = $scope.arr.push.toString("");
        $scope.fullArr.push($scope.text);
        $scope.arr = [];
      }
    }

    for (var j = 0; j < $scope.fullArr.length; j++)
    {
      $scope.index = $scope.fullArr[j].indexOf($scope.fullArr);

      if ($scope.index != -1 && scopeIndex != j)
      {
        $scope.count++;
      }
    }
  }

  // $scope.words = = {};
*/
  
  $scope.recount = function()
  {
    //update letter count
    $scope.letterCount = $scope.texts.replaceAll(' ','').length;

    if ($scope.letterCount == 0)
    {
      $scope.altLetterCount = 1;
    }

    else
    {
      $scope.altLetterCount = $scope.letterCount;
    }
   
    // update word count
    $scope.wordCount = $scope.getWordCount($scope.texts);

    // update each letter counts
    $scope.setLettersCount($scope.texts,$scope);

    // update each word counts
    $scope.setWordsCount($scope.texts,$scope)

    // update sentence count (future)
    //$scope.sentenceCount = ;

    // update paragraph count (future)
  }

  $scope.letters = [{"name":"a",count:0},{"name":"b",count:0},{"name":"c",count:0},{"name":"d",count:0},{"name":"e",count:0},{"name":"f",count:0},{"name":"g",count:0},{"name":"h",count:0},{"name":"i",count:0},{"name":"j",count:0},{"name":"k",count:0},{"name":"l",count:0},{"name":"m",count:0},{"name":"n",count:0},{"name":"o",count:0},{"name":"p",count:0},{"name":"q",count:0},{"name":"r",count:0},{"name":"s",count:0},{"name":"t",count:0},{"name":"u",count:0},{"name":"v",count:0},{"name":"w",count:0},{"name":"x",count:0},{"name":"y",count:0},{"name":"z",count:0}];

  $scope.sortType = [{"name":"Alphabetical&#8593","sort":"name"},{"name":"Alphabetical &#8595","sort":"-name"},{"name":"Most common","sort":"count"},{"name":"Least common","sort":"-count"}];

  $scope.getWordCount = function(text)
  {
    var textBeforeWhitespace = false; 
    var numWords = 0;
 
    for (var i = 0; i < text.length; i++) 
    {
      var currentCharacter = text[i];
      
      if (currentCharacter == " ") 
      {
        if (textBeforeWhitespace)
        {
          numWords += 1;
          textBeforeWhitespace = false;
        }
      }

      else
      {
        textBeforeWhitespace = true;
      }
    }
 
    numWords += 1;
    return numWords;
  }

  $scope.setLettersCount = function(text,$scope)
  {
    for (var x = 0; x < $scope.letters.length; x++)
    {
      $scope.letters[x].count = 0;
    }

    var textArr = text.split("");
   
    for (var i = 0; i < textArr.length; i++)
    {
      var letter = textArr[i];
      letter = letter.toLowerCase();

      for (var j = 0; j < $scope.letters.length; j++)
      {
        if ($scope.letters[j].name == letter)
        {
          $scope.letters[j].count++;
          break;
        }
      }  
    }
  } 
});




</script> 

</head>

</html>